{% extends "ADMIN/layout1.html" %}
{% block body %}
  <head>
    <meta charset="UTF-8">
    <title>Python Flask Employee Create, read, update and delete (CRUD) using pymysql</title>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  
 
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
 
  </head>

 
    <!-- NAVIGATION  -->
 
 
    <div class="container pt-4">
 
    
      {% with messages = get_flashed_messages()  %}
      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}
  
    
    <div class="col-md-8">
      <table id="example" class="table table-striped table-bordered" style="width:100%">
     <thead>
          <tr>
            <td>ID</td>
            <td>Fullname</td>
            <td>Email</td>
			<td>Enrollment</td>
			<td>Gender</td>
			<td>Birth Date</td>
            <td>Phone</td>
			<td>Semester</td>
			<td>City</td>
			<td>State</td>
			<td>Address</td>
            <td>Action</td>
          </tr>
        </thead>
     <tbody>
          {% for data in employee %}
          <tr>
			<td>{{data.id}}</td>
            <td>{{data.name}}</td>
            <td>{{data.email}}</td>
			<td>{{data.Enrollment}}</td>
			<td>{{data.Gender}}</td>
			<td>{{data.birth}}</td>
            <td>{{data.contact}}</td>
			<td>{{data.semester}}</td>
			<td>{{data.city}}</td>
			<td>{{data.state}}</td>
			<td>{{data.Address}}</td>
            <td width="150">
              <a href="/edit/{{data.id}}" class="btn btn-secondary btn-sm">edit</a>
              <a href="/delete/{{data.id}}" class="btn btn-danger btn-delete btn-sm">delete</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  
</div></div><script>
const btnDelete= document.querySelectorAll('.btn-delete');
if(btnDelete) {
  const btnArray = Array.from(btnDelete);
  btnArray.forEach((btn) => {
    btn.addEventListener('click', (e) => {
      if(!confirm('Are you sure you want to delete it?')){
        e.preventDefault();
      }
    });
  })
}
 
$(document).ready(function() {
    $('#example').DataTable({     
      "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "All"]],
        "iDisplayLength": 10
       } 
    );
} );
 
</script>
 
{% endblock %}